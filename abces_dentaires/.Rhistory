rename("F" = n_F,"M" = n_M,"NA" = n_NA,"F%" = `%_F`,"M%" = `%_M`,"NA%" = `%_NA`) %>%
select(-contains("NA")) %>%
mutate(F = paste(`F`," (",`F%`,"%)", sep = ""),
M = paste(`M`," (",`M%`,"%)", sep = "")) %>%
select(-`F%`, -`M%`) %>%
rename("Age_category" = patient_age_range) %>%
ggplot() +
geom_col(aes(x=Age_category, y=`F`, fill = "red")) +
geom_col(aes(x=Age_category, y=M, fill = "blue")) +
scale_y_discrete(breaks = seq(-200000, 200000, 50000),
labels = paste0(as.character(c(seq(200, 0, -50), seq(50, 200, 50))))) +
coord_flip() +
#scale_fill_discrete(name = "Gender", labels = c("Female", "Male"))+
xlab("Age")+
ylab("Population (000's)")+
theme_minimal()
data.frame(v=sample(1:20,1000,replace=T), g=c('M','F'))
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2))
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
#pivot_wider(names_from = patient_gender, values_from = c(n, "%")) %>%
#rename("F" = n_F,"M" = n_M,"NA" = n_NA,"F%" = `%_F`,"M%" = `%_M`,"NA%" = `%_NA`) %>%
#select(-contains("NA")) %>%
#mutate(F = paste(`F`," (",`F%`,"%)", sep = ""),
#       M = paste(`M`," (",`M%`,"%)", sep = "")) %>%
#select(-`F%`, -`M%`) %>%
#rename("Age_category" = patient_age_range) %>%
ggplot(aes(x=as.factor(Age_category),fill=)) +
geom_bar(data=subset(test,g=="F")) +
geom_bar(data=subset(test,g=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) +
coord_flip()
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
#pivot_wider(names_from = patient_gender, values_from = c(n, "%")) %>%
#rename("F" = n_F,"M" = n_M,"NA" = n_NA,"F%" = `%_F`,"M%" = `%_M`,"NA%" = `%_NA`) %>%
#select(-contains("NA")) %>%
#mutate(F = paste(`F`," (",`F%`,"%)", sep = ""),
#       M = paste(`M`," (",`M%`,"%)", sep = "")) %>%
#select(-`F%`, -`M%`) %>%
#rename("Age_category" = patient_age_range) %>%
ggplot(aes(x=as.factor(Age_category),fill=patient_gender)) +
geom_bar(data=subset(patient_gender=="F")) +
geom_bar(data=subset(patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) +
coord_flip()
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
#pivot_wider(names_from = patient_gender, values_from = c(n, "%")) %>%
#rename("F" = n_F,"M" = n_M,"NA" = n_NA,"F%" = `%_F`,"M%" = `%_M`,"NA%" = `%_NA`) %>%
#select(-contains("NA")) %>%
#mutate(F = paste(`F`," (",`F%`,"%)", sep = ""),
#       M = paste(`M`," (",`M%`,"%)", sep = "")) %>%
#select(-`F%`, -`M%`) %>%
#rename("Age_category" = patient_age_range) %>%
ggplot(aes(x=as.factor(Age_category),fill=patient_gender)) +
geom_bar(subset(patient_gender=="F")) +
geom_bar(subset(patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) +
coord_flip()
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
#pivot_wider(names_from = patient_gender, values_from = c(n, "%")) %>%
#rename("F" = n_F,"M" = n_M,"NA" = n_NA,"F%" = `%_F`,"M%" = `%_M`,"NA%" = `%_NA`) %>%
#select(-contains("NA")) %>%
#mutate(F = paste(`F`," (",`F%`,"%)", sep = ""),
#       M = paste(`M`," (",`M%`,"%)", sep = "")) %>%
#select(-`F%`, -`M%`) %>%
#rename("Age_category" = patient_age_range) %>%
ggplot(aes(x=as.factor(Age_category),fill=patient_gender)) +
geom_bar(subset(.$patient_gender=="F")) +
geom_bar(subset(.$patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) +
coord_flip()
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
#pivot_wider(names_from = patient_gender, values_from = c(n, "%")) %>%
#rename("F" = n_F,"M" = n_M,"NA" = n_NA,"F%" = `%_F`,"M%" = `%_M`,"NA%" = `%_NA`) %>%
#select(-contains("NA")) %>%
#mutate(F = paste(`F`," (",`F%`,"%)", sep = ""),
#       M = paste(`M`," (",`M%`,"%)", sep = "")) %>%
#select(-`F%`, -`M%`) %>%
#rename("Age_category" = patient_age_range) %>%
ggplot(aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(subset(patient_gender=="F")) +
geom_bar(subset(patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) +
coord_flip()
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
#pivot_wider(names_from = patient_gender, values_from = c(n, "%")) %>%
#rename("F" = n_F,"M" = n_M,"NA" = n_NA,"F%" = `%_F`,"M%" = `%_M`,"NA%" = `%_NA`) %>%
#select(-contains("NA")) %>%
#mutate(F = paste(`F`," (",`F%`,"%)", sep = ""),
#       M = paste(`M`," (",`M%`,"%)", sep = "")) %>%
#select(-`F%`, -`M%`) %>%
#rename("Age_category" = patient_age_range) %>%
ggplot(aes(x=as.factor(patient_age_range),fill=patient_gender))
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
#pivot_wider(names_from = patient_gender, values_from = c(n, "%")) %>%
#rename("F" = n_F,"M" = n_M,"NA" = n_NA,"F%" = `%_F`,"M%" = `%_M`,"NA%" = `%_NA`) %>%
#select(-contains("NA")) %>%
#mutate(F = paste(`F`," (",`F%`,"%)", sep = ""),
#       M = paste(`M`," (",`M%`,"%)", sep = "")) %>%
#select(-`F%`, -`M%`) %>%
#rename("Age_category" = patient_age_range) %>%
ggplot(aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(subset(patient_gender=="F"))
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender)
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2),
gender = factor(patient_gender)) %>%
#pivot_wider(names_from = patient_gender, values_from = c(n, "%")) %>%
#rename("F" = n_F,"M" = n_M,"NA" = n_NA,"F%" = `%_F`,"M%" = `%_M`,"NA%" = `%_NA`) %>%
#select(-contains("NA")) %>%
#mutate(F = paste(`F`," (",`F%`,"%)", sep = ""),
#       M = paste(`M`," (",`M%`,"%)", sep = "")) %>%
#select(-`F%`, -`M%`) %>%
#rename("Age_category" = patient_age_range) %>%
ggplot(aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(subset(gender=="F")) +
geom_bar(subset(gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) +
coord_flip()
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2),
gender = factor(patient_gender)) %>%
ggplot(aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(subset(gender=="F")) +
geom_bar(subset(gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) +
coord_flip()
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2),
gender = factor(patient_gender)) %>%
ggplot(aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(gender=="F")) +
geom_bar(data=subset(gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) +
coord_flip()
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2),
gender = factor(patient_gender)) %>%
ggplot(aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(.$gender=="F")) +
geom_bar(data=subset(.$gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) +
coord_flip()
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2),
gender = factor(patient_gender)) %>%
ggplot(data = ., aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(.$gender=="F")) +
geom_bar(data=subset(.$gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) +
coord_flip()
tab = qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2),
gender = factor(patient_gender))
ggplot(data = tab, aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab$gender=="F")) +
geom_bar(data=subset(tab$gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) +
coord_flip()
ggplot(data = tab, aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$gender=="F")) +
geom_bar(data=subset(tab, tab$gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-40,40,10),labels=abs(seq(-40,40,10))) +
coord_flip()
ggplot(data = tab, aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$gender=="F")) +
geom_bar(data=subset(tab, tab$gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-4000,4000,10),labels=abs(seq(-40,40,10))) +
coord_flip()
ggplot(data = tab, aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$gender=="F")) +
geom_bar(data=subset(tab, tab$gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-4000,4000,10),labels=abs(seq(-4000,4000,10))) +
coord_flip()
ggplot(data = tab, aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$gender=="F")) +
geom_bar(data=subset(tab, tab$gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-4000,4000,100),labels=abs(seq(-4000,4000,100))) +
coord_flip()
ggplot(data = tab, aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$gender=="F")) +
geom_bar(data=subset(tab, tab$gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-4000,4000,100)) +
coord_flip()
ggplot(data = tab, aes(x=as.factor(patient_age_range),fill=gender)) +
geom_bar(data=subset(tab, tab$gender=="F")) +
geom_bar(data=subset(tab, tab$gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-4000,4000,100)) +
coord_flip()
ggplot(data = tab, aes(x=as.factor(patient_age_range),fill=gender)) +
geom_bar(data=subset(tab, tab$gender=="F")) +
geom_bar(data=subset(tab, tab$gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-1000,1000,100)) +
coord_flip()
ggplot(data = tab, aes(x=as.factor(patient_age_range),fill=gender)) +
geom_bar(data=subset(tab, tab$gender=="F")) +
geom_bar(data=subset(tab, tab$gender=="M"),aes(y=..count..*(-1))) +
scale_y_discrete(breaks=seq(-1000,1000,100)) +
coord_flip()
tab
ggplot(data = tab, aes(x=as.factor(patient_age_range),fill=gender)) +
geom_bar(data=subset(tab, tab$gender=="F")) +
geom_bar(data=subset(tab, tab$gender=="M"),aes(y=n*(-1))) +
scale_y_discrete(breaks=seq(-1000,1000,100)) +
coord_flip()
data.frame(v=sample(1:20,1000,replace=T), g=c('M','F'))
tab = qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2),
gender = factor(patient_gender)) %>% select(gender,patient_age_range)
tab = qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
select(gender,patient_age_range)
tab = qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
ggplot(data = tab, aes(x=as.factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F")) +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_discrete(breaks=seq(-1000,1000,100)) +
coord_flip()
tab
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F")) +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_discrete(breaks=seq(-1000,1000,100)) +
coord_flip()
library(plyr)
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F")) +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_discrete(breaks=seq(-1000,1000,100)) +
coord_flip()
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F")) +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_discrete(breaks=seq(-10,10,1)) +
coord_flip()
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F")) +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_discrete(breaks=seq(-10000,10000,100)) +
coord_flip()
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F")) +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_discrete(breaks=seq(-1000,1000,100)) +
coord_flip()
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F")) +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_continous(breaks=seq(-1000,1000,100)) +
coord_flip()
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F")) +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-1000,1000,100)) +
coord_flip()
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F")) +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-1000,1000,100))
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"))
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), position = "identity") +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-1000,1000,100)) +
coord_flip()
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), position = "identity") +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-1000,1000,100)) +
coord_flip()
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), position = "identity")
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), position = "dodge")
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), position = "count")
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), stat = "count")
tab = qare %>%
count(patient_gender, patient_age_range) %>%
#group_by(patient_gender) %>%
#mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
tab = qare %>%
count(patient_gender, patient_age_range)
tab
qare$patient_gender
qare %>%
count(patient_gender, patient_age_range)
qare %>% count(patient_gender, patient_age_range)
qare = read.xlsx("care_plateforme.xlsx", sheet = 1)
qare = qare %>% select(-c(ticked_cardio_vascular_family, ticked_asthma, ticked_stress, ticked_psycho, ticked_neuroleptics,
ticked_bcg, ticked_diphtheria_polio, ticked_tetanus, ticked_pertussis, ticked_haemophilus,
ticked_hepatitis_b, ticked_pneumococcus, ticked_meningitis_c, ticked_mmr, ticked_hpv, ticked_influenza,
ticked_zona, ticked_food, ticked_diet, ticked_alcohol, ticked_cigarettes, ticked_exercise)) %>%
mutate(
consultation_id = as.numeric(as.factor(consultation_id)),
patient_id = as.numeric(as.factor(patient_id)),
physician_id = as.numeric(as.factor(physician_id))
)
tab = qare %>%
count(patient_gender, patient_age_range) %>%
#group_by(patient_gender) %>%
#mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
table(qare$patient_gender,qare$patient_age_range)
qare %>% count(patient_gender)
qare %>% count(patient_gender,patient_age_range)
library(tidyverse)
qare %>% count(patient_gender,patient_age_range)
qare %>% count(.$patient_gender,patient_age_range)
qare
tab = qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
#mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
tab = qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
qare$patient_gender
qare %>% count(patient_age_range)
qare %>% count(patient_age_range)
qare %>% count(.$patient_age_range)
qare %>% count(.$patient_age_range, x$patient_gender)
qare %>% count(.$patient_age_range, .$patient_gender)
qare %>% group_by(patient_age_range) %>% count(patient_gender)
qare %>% group_by(patient_age_range) %>% count()
tab = qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
tab = qare %>%
group_by(patient_gender) %>%
count(patient_gender, patient_age_range) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
tab = qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
qare %>%
count(patient_gender, patient_age_range)
qare %>%
count(patient_gender, patient_age_range)
library(tidyverse)
library(stringr)
library(openxlsx)
qare = read.xlsx("care_plateforme.xlsx", sheet = 1)
qare = qare %>% select(-c(ticked_cardio_vascular_family, ticked_asthma, ticked_stress, ticked_psycho, ticked_neuroleptics,
ticked_bcg, ticked_diphtheria_polio, ticked_tetanus, ticked_pertussis, ticked_haemophilus,
ticked_hepatitis_b, ticked_pneumococcus, ticked_meningitis_c, ticked_mmr, ticked_hpv, ticked_influenza,
ticked_zona, ticked_food, ticked_diet, ticked_alcohol, ticked_cigarettes, ticked_exercise)) %>%
mutate(
consultation_id = as.numeric(as.factor(consultation_id)),
patient_id = as.numeric(as.factor(patient_id)),
physician_id = as.numeric(as.factor(physician_id))
)
qare %>%
ggplot()+
geom_bar(aes(x = patient_age_range))+
scale_y_continuous(breaks = seq(0,1000,50))+
labs(title = "Patient age distribution",
y = "Count",
x = "Age")
qare %>%
filter(!is.na(patient_gender)) %>%
ggplot()+
geom_bar(aes(x = patient_age_range, fill = patient_gender), position = "dodge")+
scale_y_continuous(breaks = seq(0,1000,50))+
labs(title = "Patient age distribution by sex",
y = "Count",
x = "Age",
fill = "Gender")
#pivot_wider(names_from = patient_gender, values_from = c(n, "%")) %>%
#rename("F" = n_F,"M" = n_M,"NA" = n_NA,"F%" = `%_F`,"M%" = `%_M`,"NA%" = `%_NA`) %>%
#select(-contains("NA")) %>%
#mutate(F = paste(`F`," (",`F%`,"%)", sep = ""),
#       M = paste(`M`," (",`M%`,"%)", sep = "")) %>%
#select(-`F%`, -`M%`) %>%
#rename("Age_category" = patient_age_range) %>%
qare %>%
count(patient_gender, patient_age_range)
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
qare %>%
count(patient_gender, patient_age_range)
qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
tab = qare %>%
count(patient_gender, patient_age_range) %>%
group_by(patient_gender) %>%
mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), position = "identity") +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=..count..*(-1))) +
scale_y_continuous(breaks=seq(-1000,1000,100)) +
coord_flip()
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), position = "identity") +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=``after_stat(count)*(-1))) +
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), position = "identity") +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=`after_stat`(count)*(-1))) +
scale_y_continuous(breaks=seq(-1000,1000,100)) +
coord_flip()
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), position = "identity") +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=`after_stat(count)`*(-1))) +
scale_y_continuous(breaks=seq(-1000,1000,100)) +
coord_flip()
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), position = "identity") +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=after_stat(count)*(-1))) +
scale_y_continuous(breaks=seq(-1000,1000,100)) +
coord_flip()
tab = qare %>%
count(patient_gender, patient_age_range)
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), position = "identity") +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=after_stat(count)*(-1))) +
scale_y_continuous(breaks=seq(-1000,1000,100)) +
coord_flip()
yab
tav
tab
tab = qare %>%
count(patient_gender, patient_age_range) %>%
#group_by(patient_gender) %>%
#mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), position = "identity") +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=after_stat(count)*(-1))) +
scale_y_continuous(breaks=seq(-1000,1000,100)) +
coord_flip()
tab
tab = qare %>%
#count(patient_gender, patient_age_range) %>%
#group_by(patient_gender) %>%
#mutate("%" = round(prop.table(n)*100,2)) %>%
select(patient_gender,patient_age_range)
ggplot(data = tab, aes(x=factor(patient_age_range),fill=patient_gender)) +
geom_bar(data=subset(tab, tab$patient_gender=="F"), position = "identity") +
geom_bar(data=subset(tab, tab$patient_gender=="M"),aes(y=after_stat(count)*(-1))) +
scale_y_continuous(breaks=seq(-1000,1000,100)) +
coord_flip()
devtools::install_github("dgrtwo/snippr")
snippets_get()
devtools::install_github("dgrtwo/snippr")
devtools::install_github("dgrtwo/snippr")
devtools::install_github("dgrtwo/snippr")
